- defaults:
    brewfile:
      stdout: true
    brew:
      stderr: true
      stdout: true
    link:
      create: true
      relink: true
      force: true

- install-brew: true

- brewfile:
    - brew/Brewfile

- clean:
    ~/:
      force: true

- link:
    ~/.amethyst.yml: amethyst/.amethyst.yml
    ~/.gitconfig: git-config/.gitconfig
    ~/.gitignore_global: git-config/.gitignore_global
    ~/.tmux.conf: tmux/.tmux.conf
    ~/.zprofile: zsh/.zprofile
    ~/.zshenv: zsh/.zshenv
    ~/.zshrc: zsh/.zshrc

- shell:
    - [git submodule update --init --recursive, Installing submodules]
    - command: |
        if [ ! -d $HOME/seeshellontheseasaw ]; then
          git clone git@github.com/Ajibaji/seeshellontheseasaw.git $HOME/seeshellontheseasaw
        fi
      stderr: true
      quiet: true
      description: Git clone seeshellontheseasaw
    - command: |
        if ! command -v fnm; then
          curl -fsSL https://fnm.vercel.app/install | bash
        fi
      stdin: true
      stderr: true
      quiet: true
      description: installing FNM
    - command: |
        if ! command -v cargo; then
          curl https://sh.rustup.rs -sSf | sh -s -- -y
        fi
      stdin: true
      stderr: true
      quiet: true
      description: installing cargo
