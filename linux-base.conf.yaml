- defaults:
    link:
      create: true
      relink: true
      force: true

- shell:
    - command: |
        export GIT_SSH_COMMAND="ssh -o UserKnownHostsFile=/dev/null -o StrictHostKeyChecking=no"
        if ! command git ls-remote git@github.com:Ajibaji/seeshellontheseasaw.git; then
          echo "You aren't me. Nothing to see here"
        else
          if [ ! -d ~/seeshellontheseasaw ]; then
            git clone git@github.com:ajibaji/seeshellontheseasaw.git ~/seeshellontheseasaw
          fi
        fi
        unset GIT_SSH_COMMAND
      stderr: true
      quiet: false
      description: git clone seeshellontheseasaw
    - command: |
        if ! command -v atuin; then
          export NO_MODIFY_PATH=1
          curl --proto '=https' --tlsv1.2 -lssf https://setup.atuin.sh | sh
          git checkout -- .
        fi
      stdin: true
      stderr: true
      quiet: false
      description: installing atuin
    - command: |
        if [[ ! -f ~/.local/share/fonts/JetBrainsMonoNerdFont-Regular.ttf ]]; then
          sudo mkdir -p ~/.local/share/fonts
          sudo curl -fsSLO ~/.local/share/fonts https://github.com/ryanoasis/nerd-fonts/releases/download/v3.2.1/jetbrainsmono.zip && \
            cd ~/.local/share/fonts && \
            sudo unzip -o jetbrainsmono.zip
          sudo rm jetbrainsmono.zip && \
            fc-cache -fv
        fi
      stdin: true
      stderr: true
      quiet: false
      description: installing jetbrains font
    - command: |
        if ! command -v kitty; then
          echo "my name is $(whoami)"
          curl -L https://sw.kovidgoyal.net/kitty/installer.sh | sh /dev/stdin launch=n
          ln -sf ~/.local/kitty.app/bin/kitty ~/.local/kitty.app/bin/kitten ~/.local/bin/
          echo 'kitty.desktop' > ~/.config/xdg-terminals.list
        fi
      stdin: true
      stderr: true
      quiet: false
      description: installing kitty
    - command: |
        source ~/.bashrc
        npm i -g neovim typescript azure-pipelines-language-server typescript-language-server sql-language-server @biomejs/biome
      stdin: true
      stderr: true
      quiet: false
      description: installing npm packages
    - command: |
        if ! command -v eget; then
          git clone https://github.com/rjshrjndrn/eget
          cd eget
          go build -trimpath -ldflags "-s -w -X main.Version=1.3.2-dev.23" -o dist/bin/eget .
          sudo mv ./dist/bin/eget /usr/local/bin/eget
          cd -
          rm -rf eget
        fi
      stdin: true
      stderr: true
      quiet: false
      description: installing eget
    - command: |
        source ~/.bashrc
        if ! command -v jqp; then
          eget noahgorstein/jqp
        fi
      stdin: true
      stderr: true
      quiet: false
      description: installing jqp
    - command: |
        if ! command -v ble-bind; then
          curl -L https://github.com/akinomyoga/ble.sh/releases/download/nightly/ble-nightly.tar.xz | tar xJf -
          bash ble-nightly/ble.sh --install ~/.local/share
          rm -rf ble-nightly
        fi
      stdin: true
      stderr: true
      quiet: false
      description: installing ble.sh
    - command: |
        if ! command -v bat; then
          echo 'batcat "$@"' > ./bat && chmod +x ./bat
          sudo mv ./bat /usr/local/bin/
          git checkout -- .
        fi
      stdin: true
      stderr: true
      quiet: false
      description: creating batcat wrapper
    - command: |
        source ~/.bashrc
        if ! command -v fzf; then
          eget junegunn/fzf
        fi
      stdin: true
      stderr: true
      quiet: false
      description: installing fzf
